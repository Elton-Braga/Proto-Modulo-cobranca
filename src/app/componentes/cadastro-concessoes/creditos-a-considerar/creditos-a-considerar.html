<form [formGroup]="formPrincipal" (ngSubmit)="onSubmit()">
  <div class="flexboxform">
    <mat-accordion multi>
      <!-- BLOCO 1 -->
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title> Informações do Beneficiário </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-form-field appearance="outline" class="item">
          <mat-label>PA/Imóvel/Gleba</mat-label>
          <input matInput formControlName="paImovelGleba" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="item">
          <mat-label>Número do Documento</mat-label>
          <input matInput formControlName="numeroDocumento" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="item">
          <mat-label>Beneficiário</mat-label>
          <input matInput formControlName="beneficiario" />
        </mat-form-field>
      </mat-expansion-panel>

      <!-- BLOCO 2 -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Créditos </mat-panel-title>
        </mat-expansion-panel-header>

        <div formArrayName="creditos">
          <div
            *ngFor="let credito of creditos.controls; let i = index"
            [formGroupName]="i"
            class="linha-credito"
          >
            <mat-form-field appearance="outline" class="item">
              <mat-label>Descrição da Origem do Crédito</mat-label>
              <input matInput formControlName="descricaoOrigem" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="item">
              <mat-label>Data da Baixa do Pagamento</mat-label>
              <input matInput type="date" formControlName="dataBaixa" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="item">
              <mat-label>Valor Original</mat-label>
              <input matInput type="number" formControlName="valorOriginal" />
            </mat-form-field>

            <mat-form-field appearance="outline" class="item">
              <mat-label>Processo SEI</mat-label>
              <input matInput formControlName="processoSei" />
            </mat-form-field>
          </div>
        </div>

        <button
          mat-icon-button
          color="primary"
          (click)="adicionarCredito()"
          type="button"
          aria-label="Adicionar Crédito"
        >
          <mat-icon>add</mat-icon>
        </button>
      </mat-expansion-panel>

      <!-- BLOCO 3 -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Dados Consolidados </mat-panel-title>
        </mat-expansion-panel-header>

        <table
          mat-table
          [dataSource]="dataSource"
          class="mat-elevation-z2 w-100"
        >
          <ng-container matColumnDef="data">
            <th mat-header-cell *matHeaderCellDef>Data</th>
            <td mat-cell *matCellDef="let element">{{ element.data }}</td>
          </ng-container>

          <ng-container matColumnDef="descricao">
            <th mat-header-cell *matHeaderCellDef>Descrição</th>
            <td mat-cell *matCellDef="let element">{{ element.descricao }}</td>
          </ng-container>

          <ng-container matColumnDef="valorOriginal">
            <th mat-header-cell *matHeaderCellDef>Valor Original</th>
            <td mat-cell *matCellDef="let element">
              {{ element.valorOriginal | currency : "BRL" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="valorCorrigido">
            <th mat-header-cell *matHeaderCellDef>Valor Corrigido</th>
            <td mat-cell *matCellDef="let element">
              {{ element.valorCorrigido | currency : "BRL" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="sei">
            <th mat-header-cell *matHeaderCellDef>SEI</th>
            <td mat-cell *matCellDef="let element">{{ element.sei }}</td>
          </ng-container>

          <ng-container matColumnDef="jaUtilizado">
            <th mat-header-cell *matHeaderCellDef>Já Utilizado</th>
            <td mat-cell *matCellDef="let element">
              {{ element.jaUtilizado }}
            </td>
          </ng-container>

          <ng-container matColumnDef="numRefDistrito">
            <th mat-header-cell *matHeaderCellDef>Nº ref. Distrito</th>
            <td mat-cell *matCellDef="let element">
              {{ element.numRefDistrito }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </mat-expansion-panel>
    </mat-accordion>

    <br />

    <div class="botoes">
      <button mat-raised-button color="primary" type="submit">Salvar</button>
      <button mat-raised-button color="warn" type="reset">Limpar</button>
    </div>
  </div>
</form>
