<div class="main">
  <h1 class="mb-4">Cadastro de Concess√µes</h1>

  <mat-accordion multi>
    <!-- Acordeon 1: Dados Gerais -->
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title> Dados do Im√≥vel </mat-panel-title>
      </mat-expansion-panel-header>

      <form
        [formGroup]="formDados"
        (ngSubmit)="onSubmit()"
        class="flexbox-form"
      >
        <!-- Linha 1 -->
        <mat-form-field appearance="outline" class="itens">
          <mat-label>Im√≥vel/Projeto</mat-label>
          <input matInput formControlName="imovelProjeto" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Tipo Documento</mat-label>
          <mat-select formControlName="tipoDocumento">
            <mat-option value="titulo">T√≠tulo Definitivo</mat-option>
            <mat-option value="contrato">Contrato</mat-option>
            <mat-option value="outro">Outro</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>N√∫mero</mat-label>
          <input matInput formControlName="numero" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Benefici√°rio</mat-label>
          <input matInput formControlName="beneficiario" />
        </mat-form-field>

        <!-- Linha 2 -->
        <mat-form-field appearance="outline" class="itens">
          <mat-label>CPF Benefici√°rio</mat-label>
          <input matInput formControlName="cpfBeneficiario" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Nascimento</mat-label>
          <input
            matInput
            [matDatepicker]="pickerNascimento"
            formControlName="nascimento"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerNascimento"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerNascimento></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Idade</mat-label>
          <input matInput type="number" formControlName="idade" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Qtd. Filhos</mat-label>
          <input matInput type="number" formControlName="qtdFilhos" />
        </mat-form-field>

        <!-- üè° CAMPOS FALTANTES -->
        <mat-form-field appearance="outline" class="itens">
          <mat-label>N√∫mero do Lote</mat-label>
          <input matInput formControlName="numeroLote" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>√Årea (ha)</mat-label>
          <input matInput formControlName="area" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Gleba</mat-label>
          <input matInput formControlName="gleba" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Data de Publica√ß√£o</mat-label>
          <input
            matInput
            [matDatepicker]="pickerPublicacao"
            formControlName="dataPublicacao"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerPublicacao"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerPublicacao></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>N¬∫ Boletim de Servi√ßo</mat-label>
          <input matInput formControlName="numeroBoletimServico" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Data da Entrega</mat-label>
          <input
            matInput
            [matDatepicker]="pickerEntrega"
            formControlName="dataEntrega"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerEntrega"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerEntrega></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Data da Emiss√£o</mat-label>
          <input
            matInput
            [matDatepicker]="pickerEmissao"
            formControlName="dataEmissao"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerEmissao"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerEmissao></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>N√∫mero do Processo</mat-label>
          <input matInput formControlName="numeroProcesso" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>C√≥digo SNCR</mat-label>
          <input matInput formControlName="codigoSNCR" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Diferen√ßa de √Årea (ha)</mat-label>
          <input matInput formControlName="diferencaArea" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Valor do Hectare</mat-label>
          <input matInput formControlName="valorHectare" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Valor da Aliena√ß√£o</mat-label>
          <input matInput formControlName="valorAlienacao" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Frequ√™ncia do Pagamento</mat-label>
          <mat-select formControlName="frequenciaPagamento">
            <mat-option value="mensal">Mensal</mat-option>
            <mat-option value="anual">Anual</mat-option>
            <mat-option value="unico">√önico</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>N√∫mero do M√≥dulo Fiscal</mat-label>
          <input matInput formControlName="numeroModuloFiscal" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>M√≥dulo Fiscal</mat-label>
          <input matInput formControlName="moduloFiscal" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>T√≠tulo Cancelado?</mat-label>
          <mat-select formControlName="tituloCancelado">
            <mat-option value="sim">Sim</mat-option>
            <mat-option value="nao">N√£o</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Valor da Primeira Presta√ß√£o</mat-label>
          <input matInput formControlName="valorPrimeiraPrestacao" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Vencimento da Primeira Presta√ß√£o</mat-label>
          <input
            matInput
            [matDatepicker]="pickerVencimento"
            formControlName="vencimentoPrimeiraPrestacao"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerVencimento"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerVencimento></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Condi√ß√£o de Pagamento</mat-label>
          <input matInput formControlName="condicaoPagamento" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>N√∫mero de Presta√ß√µes</mat-label>
          <input matInput type="number" formControlName="numeroPrestacoes" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens">
          <mat-label>Munic√≠pio da Sede do Im√≥vel</mat-label>
          <input matInput formControlName="municipioSedeImovel" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="itens align-select">
          <mat-label>Tipo de Termo Aditivo</mat-label>
          <mat-select
            formControlName="tipoTermoAditivo"
            panelClass="align-select"
          >
            <mat-option value="requerimentoValor"
              >Requerimento de Valor</mat-option
            >
            <mat-option value="alterarCondicaoPgto"
              >Alterar Condi√ß√£o de Pagamento</mat-option
            >
          </mat-select>
        </mat-form-field>

        <!-- Checkbox e Observa√ß√µes -->
        <mat-form-field appearance="outline" class="itens align-select">
          <mat-label>Regulariza√ß√£o Fundiaria?</mat-label>
          <mat-select formControlName="rf" panelClass="align-select">
            <mat-option value="requerimentoValor">Sim</mat-option>
            <mat-option value="alterarCondicaoPgto">N√£o</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 itens">
          <mat-label>Observa√ß√µes</mat-label>
          <textarea matInput formControlName="observacoes" rows="3"></textarea>
        </mat-form-field>

        <div class="w-100">
          <button
            mat-raised-button
            color="primary"
            class="btn-salvar"
            type="submit"
          >
            Salvar Dados
          </button>
        </div>
      </form>
    </mat-expansion-panel>

    <!-- Acordeon 2: Resumo Financeiro -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> Resumo Financeiro </mat-panel-title>
      </mat-expansion-panel-header>

      <form [formGroup]="formFinanceiro" class="mt-3">
        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Valor total atualizado</mat-label>
              <input matInput formControlName="valorTotalAtualizado" />
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Valor total devido</mat-label>
              <input matInput formControlName="valorTotalDevido" />
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Qtd. presta√ß√µes a vencer</mat-label>
              <input
                matInput
                type="number"
                formControlName="qtdPrestacoesAVencer"
              />
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Valor a vencer</mat-label>
              <input matInput formControlName="valorAVencer" />
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Qtd. presta√ß√µes vencidas</mat-label>
              <input
                matInput
                type="number"
                formControlName="qtdPrestacoesVencidas"
              />
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Valor vencido</mat-label>
              <input matInput formControlName="valorVencido" />
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Qtd. presta√ß√µes pagas/baixadas</mat-label>
              <input
                matInput
                type="number"
                formControlName="qtdPrestacoesPagas"
              />
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Valor pago</mat-label>
              <input matInput formControlName="valorPago" />
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Diferen√ßas geradas</mat-label>
              <input matInput formControlName="diferencasGeradas" />
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Diferen√ßas em aberto</mat-label>
              <input matInput formControlName="diferencasEmAberto" />
            </mat-form-field>
          </div>
        </div>

        <button mat-raised-button color="accent" class="mt-3" type="submit">
          Salvar Resumo
        </button>
      </form>
    </mat-expansion-panel>
  </mat-accordion>
</div>

<!-- Toast Bootstrap Din√¢mico -->
<div
  class="toast-container position-fixed top-0 end-0 p-3"
  style="z-index: 1200"
>
  <div
    id="toastGlobal"
    class="toast border-0"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
    data-bs-delay="5000"
  >
    <div class="d-flex">
      <div id="toastMensagem" class="toast-body fw-semibold"></div>
      <button
        type="button"
        class="btn-close me-2 m-auto"
        data-bs-dismiss="toast"
        aria-label="Fechar"
      ></button>
    </div>
  </div>
</div>
