<div class="container p-3">
  <h2>Presta√ß√µes</h2>

  <mat-accordion multi>
    <!-- üß© BLOCO 1 -->
    <mat-expansion-panel expanded>
      <mat-expansion-panel-header>
        <mat-panel-title>Informa√ß√µes B√°sicas</mat-panel-title>
      </mat-expansion-panel-header>

      <form [formGroup]="formPrestacoes" class="row g-3">
        <mat-form-field class="col-md-6" appearance="outline">
          <mat-label>PA Im√≥vel/Gleba</mat-label>
          <input matInput formControlName="paImovelGleba" />
        </mat-form-field>

        <mat-form-field class="col-md-6" appearance="outline">
          <mat-label>N√∫mero do Documento</mat-label>
          <input matInput formControlName="numeroDocumento" />
        </mat-form-field>

        <mat-form-field class="col-md-6" appearance="outline">
          <mat-label>Benefici√°rio</mat-label>
          <input matInput formControlName="beneficiario" />
        </mat-form-field>

        <mat-form-field class="col-md-6" appearance="outline">
          <mat-label>N¬∫ Refer√™ncia GRU</mat-label>
          <input matInput formControlName="numeroReferenciaGru" />
        </mat-form-field>
      </form>
    </mat-expansion-panel>

    <!-- üí∞ BLOCO 2 -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Informa√ß√µes da Presta√ß√£o</mat-panel-title>
      </mat-expansion-panel-header>

      <form [formGroup]="formPrestacoes" class="row g-3">
        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Presta√ß√£o</mat-label>
          <input matInput type="number" formControlName="prestacao" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Vencimento Original</mat-label>
          <input
            matInput
            [matDatepicker]="picker1"
            formControlName="vencimentoOriginal"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker1"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Data para Pagamento</mat-label>
          <input
            matInput
            [matDatepicker]="picker2"
            formControlName="dataPagamento"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker2"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>N¬∫ Ref. Antigo</mat-label>
          <input matInput formControlName="numRefAntigo" />
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Tipo de Comprovante</mat-label>
          <mat-select formControlName="tipoComprovante">
            <mat-option value="gru">GRU</mat-option>
            <mat-option value="transferencia">Transfer√™ncia</mat-option>
            <mat-option value="boleto">Boleto</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>N¬∫ Processo SEI</mat-label>
          <input matInput formControlName="numProcessoSei" />
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>N¬∫ Registro GRU</mat-label>
          <input matInput formControlName="numRegistroGru" />
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Data da Baixa</mat-label>
          <input
            matInput
            [matDatepicker]="picker3"
            formControlName="dataBaixa"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker3"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker3></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Valor Baixado</mat-label>
          <input matInput type="number" formControlName="valorBaixado" />
        </mat-form-field>
      </form>

      <!-- üßæ DataGrid -->
      <div class="mt-3">
        <table
          mat-table
          [dataSource]="dadosTabela"
          class="mat-elevation-z2 w-100"
        >
          <ng-container matColumnDef="prestacao">
            <th mat-header-cell *matHeaderCellDef>Presta√ß√£o</th>
            <td mat-cell *matCellDef="let item">{{ item.prestacao }}</td>
          </ng-container>

          <ng-container matColumnDef="vencimentoOriginal">
            <th mat-header-cell *matHeaderCellDef>Venc. Original</th>
            <td mat-cell *matCellDef="let item">
              {{ item.vencimentoOriginal | date }}
            </td>
          </ng-container>

          <ng-container matColumnDef="dataPagamento">
            <th mat-header-cell *matHeaderCellDef>Data Pgto</th>
            <td mat-cell *matCellDef="let item">
              {{ item.dataPagamento | date }}
            </td>
          </ng-container>

          <ng-container matColumnDef="numRefAntigo">
            <th mat-header-cell *matHeaderCellDef>Ref. Antigo</th>
            <td mat-cell *matCellDef="let item">{{ item.numRefAntigo }}</td>
          </ng-container>

          <ng-container matColumnDef="tipoComprovante">
            <th mat-header-cell *matHeaderCellDef>Tipo</th>
            <td mat-cell *matCellDef="let item">{{ item.tipoComprovante }}</td>
          </ng-container>

          <ng-container matColumnDef="numProcessoSei">
            <th mat-header-cell *matHeaderCellDef>Proc. SEI</th>
            <td mat-cell *matCellDef="let item">{{ item.numProcessoSei }}</td>
          </ng-container>

          <ng-container matColumnDef="numRegistroGru">
            <th mat-header-cell *matHeaderCellDef>Reg. GRU</th>
            <td mat-cell *matCellDef="let item">{{ item.numRegistroGru }}</td>
          </ng-container>

          <ng-container matColumnDef="dataBaixa">
            <th mat-header-cell *matHeaderCellDef>Baixa</th>
            <td mat-cell *matCellDef="let item">{{ item.dataBaixa | date }}</td>
          </ng-container>

          <ng-container matColumnDef="valorBaixado">
            <th mat-header-cell *matHeaderCellDef>Valor</th>
            <td mat-cell *matCellDef="let item">
              {{ item.valorBaixado | currency : "BRL" }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </mat-expansion-panel>

    <!-- üíπ BLOCO 3 -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Valores e Encargos</mat-panel-title>
      </mat-expansion-panel-header>

      <form [formGroup]="formPrestacoes" class="row g-3">
        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Valor Principal</mat-label>
          <input matInput type="number" formControlName="valorPrincipal" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>√çndice Corre√ß√£o</mat-label>
          <input matInput formControlName="correcaoMonetariaIndice" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>M√™s/Ano</mat-label>
          <input matInput formControlName="correcaoMonetariaMesAno" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Coeficiente</mat-label>
          <input matInput formControlName="correcaoMonetariaCoeficiente" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Juros (%)</mat-label>
          <input matInput type="number" formControlName="jurosPercentual" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Desconto Juros (%)</mat-label>
          <input matInput type="number" formControlName="jurosDesconto" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Valor Corrigido</mat-label>
          <input matInput type="number" formControlName="valorCorrigido" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Desconto (Valor Corrigido)</mat-label>
          <input
            matInput
            type="number"
            formControlName="descontoValorCorrigido"
          />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Multa</mat-label>
          <input matInput type="number" formControlName="multa" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Desconto Multa</mat-label>
          <input matInput type="number" formControlName="descontoMulta" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>J. Mora</mat-label>
          <input matInput type="number" formControlName="jurosMora" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Desconto J. Mora</mat-label>
          <input matInput type="number" formControlName="descontoJurosMora" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Valor com Encargos</mat-label>
          <input matInput type="number" formControlName="valorComEncargos" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Desconto Excedente</mat-label>
          <input matInput type="number" formControlName="descontoExcedente" />
        </mat-form-field>

        <mat-form-field class="col-md-3" appearance="outline">
          <mat-label>Valor Total da Presta√ß√£o</mat-label>
          <input matInput type="number" formControlName="valorTotalPrestacao" />
        </mat-form-field>
      </form>
    </mat-expansion-panel>

    <!-- üìÑ BLOCO 4 -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Entrega e Observa√ß√µes</mat-panel-title>
      </mat-expansion-panel-header>

      <form [formGroup]="formPrestacoes" class="row g-3">
        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Data Requerimento GRU</mat-label>
          <input
            matInput
            [matDatepicker]="picker4"
            formControlName="dataRequerimentoGru"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker4"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker4></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>N¬∫ SEI</mat-label>
          <input matInput formControlName="numSei" />
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Data da Entrega GRU</mat-label>
          <input
            matInput
            [matDatepicker]="picker5"
            formControlName="dataEntregaGru"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker5"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker5></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-md-4" appearance="outline">
          <mat-label>Forma de Entrega</mat-label>
          <mat-select formControlName="formaEntregaGru">
            <mat-option value="pessoal">Pessoal</mat-option>
            <mat-option value="email">E-mail</mat-option>
            <mat-option value="correio">Correio</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="col-md-8" appearance="outline">
          <mat-label>Motivo da N√£o Entrega</mat-label>
          <input matInput formControlName="motivoNaoEntrega" />
        </mat-form-field>

        <mat-form-field class="col-md-12" appearance="outline">
          <mat-label>Observa√ß√µes</mat-label>
          <textarea matInput formControlName="observacoes" rows="3"></textarea>
        </mat-form-field>
      </form>
    </mat-expansion-panel>
  </mat-accordion>

  <div class="mt-3">
    <button mat-raised-button color="primary" (click)="onSubmit()">
      üíæ Salvar
    </button>
  </div>
</div>
