<div class="modal-fullscreen">
  <br />
  <mat-dialog-content class="modal-content">
    <div class="content-grid">
      <!-- ================= TITULAR ================= -->
      <div class="grid-section full-width">
        <h3 class="section-title">Dados do Titular</h3>
        <div class="form-grid">
          <div class="form-field" *ngFor="let col of colunasTitular">
            <mat-form-field appearance="outline" class="full-width-field">
              <mat-label>{{ getColumnDisplayName(col) }}</mat-label>
              <input
                matInput
                [(ngModel)]="data.titular[col]"
                [disabled]="!editando"
                [type]="getInputType(col)"
              />
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- ================= CONJUGE ================= -->
      <div class="grid-section full-width">
        <h3 class="section-title">Dados do Cônjuge</h3>
        <div class="form-grid">
          <div class="form-field" *ngFor="let col of colunasConjuge">
            <mat-form-field appearance="outline" class="full-width-field">
              <mat-label>{{ getColumnDisplayName(col) }}</mat-label>
              <input
                matInput
                [(ngModel)]="data.conjuge[col]"
                [disabled]="!editando"
                [type]="getInputType(col)"
              />
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- ================= PROJETO ASSENTAMENTO ================= -->
      <div class="grid-section full-width">
        <h3 class="section-title">Projeto de Assentamento</h3>
        <div class="form-grid">
          <div class="form-field" *ngFor="let col of colunasProjeto">
            <mat-form-field appearance="outline" class="full-width-field">
              <mat-label>{{ getColumnDisplayName(col) }}</mat-label>
              <input
                matInput
                [(ngModel)]="data.projeto_assentamento[0][col]"
                [disabled]="!editando"
              />
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- ================= ENDEREÇO COBRANÇA ================= -->
      <div class="grid-section full-width">
        <h3 class="section-title">Endereço de Cobrança</h3>
        <div class="form-grid">
          <div class="form-field" *ngFor="let col of colunasEndereco">
            <mat-form-field appearance="outline" class="full-width-field">
              <mat-label>{{ getColumnDisplayName(col) }}</mat-label>
              <input
                matInput
                [(ngModel)]="data.endereco[0][col]"
                [disabled]="!editando"
              />
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
  </mat-dialog-content>

  <!-- ================= RODAPÉ COM NOVO BOTÃO ================= -->
  <mat-dialog-actions class="modal-actions">
    <div class="actions-container">
      <!-- Botão à esquerda -->
      <div class="left-actions">
        <button
          mat-flat-button
          color="primary"
          class="action-button"
          (click)="abrirConsultarDivida(data)"
        >
          <mat-icon>search</mat-icon>
          Consultar Dívida
        </button>
      </div>

      <!-- Botões à direita -->
      <div class="right-actions">
        <button
          mat-flat-button
          color="primary"
          (click)="habilitarEdicao()"
          [disabled]="editando"
          class="action-button"
        >
          <mat-icon>edit</mat-icon>
          Editar
        </button>

        <button
          mat-flat-button
          color="accent"
          (click)="salvar()"
          [disabled]="!editando"
          class="action-button"
        >
          <mat-icon>save</mat-icon>
          Salvar
        </button>

        <button
          mat-stroked-button
          color="warn"
          mat-dialog-close
          class="action-button"
        >
          <mat-icon>close</mat-icon>
          Fechar
        </button>
      </div>
    </div>
  </mat-dialog-actions>
</div>
