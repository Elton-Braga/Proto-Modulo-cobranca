<!--<h2 mat-dialog-title>Consulta de Dívidas</h2>-->
<br /><br />

<mat-dialog-content class="cd-content" id="conteudo-gru">
  <div class="row topo">
    <div class="col-2">
      <img
        src="https://www.gov.br/incra/pt-br/canais_atendimento/LogoINCRAverticaldegrad.png"
        class="logo"
      />
    </div>
    <div class="col-10 texto">
      <strong>
        <h5>
          INCRA - Instituto Nacional de Colonização e Reforma Agrária
        </h5></strong
      ><br />
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat.
    </div>
  </div>
  <div class="header-dados">
    <div><strong>Beneficiário:</strong> {{ beneficiarioNome || "xxxxx" }}</div>
    <div><strong>CPF:</strong> {{ beneficiarioCpf || "xxxxx" }}</div>
  </div>

  <div class="table-container" *ngIf="pagamentos?.length; else vazio">
    <!-- BLOCO 1 – IDENTIFICAÇÃO DA RECEITA -->
    <h3 class="bloco-titulo">Identificação da Receita</h3>
    <table class="pagamentos-table" role="table">
      <thead>
        <tr>
          <th>Tipo de Receita</th>
          <th>Descrição da Receita</th>
          <th>Nº Referência</th>
          <th>Nosso Número</th>
          <th>Parcela</th>
          <th>Valor Original</th>
          <th>Saldo Devedor</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of pagamentos">
          <td>{{ p.tipoReceita || "xxxxx" }}</td>
          <td>{{ p.descricaoReceita || "xxxxx" }}</td>
          <td>{{ p.numeroReferencia || "xxxxx" }}</td>
          <td>{{ p.nossoNumero || "xxxxx" }}</td>
          <td>{{ p.parcela || "xxxxx" }}</td>
          <td style="text-align: right">
            {{ formataNumero(p.valorOriginal) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.correcao) || "xxxxx" }}
          </td>
        </tr>
      </tbody>
    </table>

    <!-- BLOCO 2 – COMPOSIÇÃO FINANCEIRA -->
    <h3 class="bloco-titulo">Composição Financeira</h3>
    <table class="pagamentos-table" role="table">
      <thead>
        <tr>
          <th>Desconto</th>
          <th>Juros de Mora</th>
          <th>Multa</th>
          <th>Remissão</th>
          <th>Crédito</th>
          <th>Valor Devido</th>
          <th>Correção</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of pagamentos">
          <td style="text-align: right">
            {{ formataNumero(p.desconto) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.jurosMora) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.multa) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.remissao) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.credito) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.valorDevido) || "xxxxx" }}
          </td>
          <td style="text-align: right">
            {{ formataNumero(p.saldoDevedor) || "xxxxx" }}
          </td>
        </tr>
      </tbody>
    </table>

    <!-- BLOCO 3 – DATAS E SITUAÇÃO -->
    <h3 class="bloco-titulo">Datas e Situação</h3>
    <table class="pagamentos-table" role="table">
      <thead>
        <tr>
          <th>Data Vencimento</th>
          <th>Data para Pagamento</th>
          <th>Data do Pagamento</th>
          <th>Data Requerimento</th>
          <th>Prorrogação</th>
          <th>Situação</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of pagamentos">
          <td>{{ p.dataVencimento || "xxxxx" }}</td>
          <td>{{ p.dataPagamentoAposVencimento || "xxxxx" }}</td>
          <td>{{ p.dataPagamento || "xxxxx" }}</td>
          <td>{{ p.dataRequerimento || "xxxxx" }}</td>
          <td>{{ p.prorrogacao || "xxxxx" }}</td>
          <td>{{ p.situacao || "xxxxx" }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #vazio>
    <div class="vazio">Nenhum registro de pagamento encontrado.</div>
  </ng-template>
</mat-dialog-content>

<div class="acoes">
  <button
    mat-flat-button
    color="primary"
    (click)="imprimir()"
    class="btn-imprimir"
  >
    <mat-icon>print</mat-icon>
    Imprimir
  </button>

  <button
    mat-flat-button
    color="accent"
    (click)="baixarGRU()"
    class="btn-baixar"
  >
    <mat-icon>download</mat-icon>
    Baixar GRU
  </button>

  <mat-dialog-actions align="end">
    <button mat-stroked-button (click)="fechar()" class="btn-fechar">
      <mat-icon>close</mat-icon>
      Fechar
    </button>
  </mat-dialog-actions>
</div>
