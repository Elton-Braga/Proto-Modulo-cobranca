<div class="principal">
  <table
    mat-table
    [dataSource]="dadosCabecalho"
    class="mat-elevation-z1 cabecalho-table"
  >
    <!-- COLUNA 1 -->
    <ng-container matColumnDef="coluna1">
      <td mat-cell *matCellDef="let row">
        <p><strong>Nome / Razão Social:</strong> {{ row.nome }}</p>
        <p><strong>CPF / CNPJ:</strong> {{ row.cpf }}</p>
        <p>
          <strong>Nº Beneficiário / INCRA:</strong>
          {{ row.codBeneficiario }}
        </p>
      </td>
    </ng-container>

    <!-- COLUNA 2 -->
    <ng-container matColumnDef="coluna2">
      <td mat-cell *matCellDef="let row">
        <p><strong>SR:</strong> {{ row.sr }}</p>
        <p><strong>UF:</strong> {{ row.uf }}</p>
      </td>
    </ng-container>

    <!-- COLUNA 3 -->
    <ng-container matColumnDef="coluna3">
      <td mat-cell *matCellDef="let row">
        <p>
          <strong>Saldo Devedor Total:</strong> R$
          {{ formatarValor(row.saldoDevedor) }}
        </p>
        <p>
          <strong>Saldo de Crédito Disponível:</strong> R$
          {{ formatarValor(totalCreditoDisponivel) }}
        </p>
      </td>
    </ng-container>

    <tr mat-row *matRowDef="let row; columns: displayedColumnsCabecalho"></tr>
  </table>

  <hr />
  <div class="tabela-container">
    <table mat-table [dataSource]="dadosTabela" class="mat-elevation-z2">
      <!-- Seleção -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="selection.toggle(row)"
            [checked]="selection.isSelected(row)"
          >
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- Data -->
      <ng-container matColumnDef="data">
        <th mat-header-cell *matHeaderCellDef>Data</th>
        <td mat-cell *matCellDef="let row">
          {{ row.data }}
        </td>
      </ng-container>

      <!-- Descrição -->
      <ng-container matColumnDef="descricao">
        <th mat-header-cell *matHeaderCellDef>Descrição</th>
        <td mat-cell *matCellDef="let row">
          {{ row.descricao }}
        </td>
      </ng-container>

      <!-- Valor original -->
      <ng-container matColumnDef="valorOriginal">
        <th mat-header-cell *matHeaderCellDef>Valor original</th>
        <td mat-cell *matCellDef="let row">
          R$ {{ formatarValor(row.valorOriginal) }}
        </td>
      </ng-container>

      <!-- Valor corrigido -->
      <ng-container matColumnDef="valorCorrigido">
        <th mat-header-cell *matHeaderCellDef>Valor corrigido</th>
        <td mat-cell *matCellDef="let row">
          R$ {{ formatarValor(row.valorCorrigido) }}
        </td>
      </ng-container>

      <!-- Folha / SEI -->
      <ng-container matColumnDef="folhaSei">
        <th mat-header-cell *matHeaderCellDef>Folha / SEI</th>
        <td mat-cell *matCellDef="let row">
          {{ row.folhaSei }}
        </td>
      </ng-container>

      <!-- Utilizado -->
      <ng-container matColumnDef="utilizado">
        <th mat-header-cell *matHeaderCellDef>Utilizado</th>
        <td mat-cell *matCellDef="let row">
          {{ row.utilizado ? "Sim" : "Não" }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <hr />
  <div>
    <mat-form-field appearance="outline" style="width: 100%">
      <mat-label>Forma de distribuição</mat-label>

      <mat-select [(value)]="formaDistribuicao">
        <mat-option *ngFor="let opcao of opcoesDistribuicao" [value]="opcao">
          {{ opcao }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <hr />
  <div class="tabela-scroll">
    <table
      mat-table
      [dataSource]="dadosTabelaPrestacoes"
      class="mat-elevation-z2 tabela-prestacoes"
    >
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="selection.toggle(row)"
            [checked]="selection.isSelected(row)"
          >
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="numeroReferencia">
        <th mat-header-cell *matHeaderCellDef>Nº Ref.</th>
        <td mat-cell *matCellDef="let d">{{ d.numeroReferencia }}</td>
      </ng-container>

      <ng-container matColumnDef="nossoNumero">
        <th mat-header-cell *matHeaderCellDef>Nosso Número</th>
        <td mat-cell *matCellDef="let d">{{ d.nossoNumero }}</td>
      </ng-container>

      <ng-container matColumnDef="prestacao">
        <th mat-header-cell *matHeaderCellDef>Prest.</th>
        <td mat-cell *matCellDef="let d">{{ d.prestacao }}</td>
      </ng-container>

      <ng-container matColumnDef="vencimento">
        <th mat-header-cell *matHeaderCellDef>Vencimento</th>
        <td mat-cell *matCellDef="let d">{{ d.vencimento }}</td>
      </ng-container>

      <ng-container matColumnDef="prorrogacao">
        <th mat-header-cell *matHeaderCellDef>Prorrogação</th>
        <td mat-cell *matCellDef="let d">{{ d.prorrogacao }}</td>
      </ng-container>

      <ng-container matColumnDef="moeda">
        <th mat-header-cell *matHeaderCellDef>Moeda</th>
        <td mat-cell *matCellDef="let d">{{ d.moeda }}</td>
      </ng-container>

      <ng-container matColumnDef="valor">
        <th mat-header-cell *matHeaderCellDef>Valor</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.valor) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="correcao">
        <th mat-header-cell *matHeaderCellDef>Correção</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.correcao) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="juros">
        <th mat-header-cell *matHeaderCellDef>Juros</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.juros) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="jurosMora">
        <th mat-header-cell *matHeaderCellDef>Juros Mora</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.jurosMora) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="multa">
        <th mat-header-cell *matHeaderCellDef>Multa</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.multa) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="descontos">
        <th mat-header-cell *matHeaderCellDef>Descontos</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.descontos) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="descExcedente">
        <th mat-header-cell *matHeaderCellDef>Desc. Exced.</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.descExcedente) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="credito">
        <th mat-header-cell *matHeaderCellDef>Crédito</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.credito) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="aPagar">
        <th mat-header-cell *matHeaderCellDef>A pagar</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.aPagar) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="totalPagar">
        <th mat-header-cell *matHeaderCellDef>Total a pagar</th>
        <td mat-cell *matCellDef="let d" class="text-right">
          {{ formatarValor(d.totalPagar) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="simulacao">
        <th mat-header-cell *matHeaderCellDef>Simulação</th>
        <td mat-cell *matCellDef="let row">Simulacao</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsPrestacoes"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumnsPrestacoes"
      ></tr>
    </table>
  </div>

  <div class="acoes">
    <button mat-flat-button color="primary" (click)="salvarAlteracoes()">
      <mat-icon>save</mat-icon>
      Salvar Alterações
    </button>

    <button mat-flat-button color="accent" (click)="imprimir()">
      <mat-icon>print</mat-icon>
      Imprimir
    </button>

    <button mat-flat-button color="warn" (click)="desfazer()">
      <mat-icon>undo</mat-icon>
      Desfazer
    </button>

    <span class="spacer"></span>

    <button mat-flat-button color="basic" (click)="fechar()">
      <mat-icon>close</mat-icon>
      Fechar
    </button>
  </div>
</div>
